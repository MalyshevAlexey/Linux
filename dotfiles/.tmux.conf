set -g base-index 1
set -g pane-base-index 1
set -sg escape-time 1

unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

bind r source-file ~/.tmux.conf \; display-message "config reloaded"

bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

set-window-option -g mode-keys vi
set -g default-terminal "screen-256color"

bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5

bind -r M-j resize-pane -D
bind -r M-k resize-pane -U
bind -r M-h resize-pane -L
bind -r M-l resize-pane -R

#bind -n C-h select-pane -L
#bind -n C-l select-pane -R
#bind -n C-k select-pane -U
#bind -n C-j select-pane -D

is_vim="[ $(tmux display -p '#{pane_current_command}') = vim ]"
bind-key -n C-h if-shell "$is_vim" "send-keys C-h"  "select-pane -L"
bind-key -n C-j if-shell "$is_vim" "send-keys C-j"  "select-pane -D"
bind-key -n C-k if-shell "$is_vim" "send-keys C-k"  "select-pane -U"
bind-key -n C-l if-shell "$is_vim" "send-keys C-l"  "select-pane -R"
bind-key -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

bind -n C-M-h previous-window
bind -n C-M-l next-window

# set -g mouse-select-window on
# set -g mouse-select-pane on
# set -g mouse-resize-pane on

# THEME
set-option -s status-interval 1
set -g status-position bottom
set -g status-bg black
set -g status-fg white
set -g status-interval 50
set -g status-left-length 30
set -g status-left '#[fg=colour22](#S) #(whoami) '
set -g status-right '#[fg=colour22,bold]#(cut -d " " -f 1-3 /proc/loadavg) %a %Y-%m-%d %H:%M:%S'

setw -g window-status-current-bg colour123
setw -g window-status-current-fg black
setw -g window-status-current-attr bold

setw -g window-status-bg black
setw -g window-status-fg colour9
setw -g window-status-attr none
setw -g window-status-format '#[fg=colour9]#I#[fg=white]:#[fg=colour7,bold]#W#[fg=colour9,bold]#F'

set -g pane-border-fg colour9
set -g pane-active-border-fg colour9
set -g pane-active-border-bg default

# HOT KEYS
bind C-c \
    new-window \; \
    select-window -t 1 \; \
    split-window -h \; \
    resize-pane -x 50 \; \
    select-pane -t 1 \; \
    split-window -v \; \
    resize-pane -y 15 \; \
    select-pane -t 1

bind C-x \
    kill-session -a \; \
    new-window \; \
    kill-window -a \; \
    move-window -t 1

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'

set -g @resurrect-capture-pane-contents 'on'

run -b '~/.tmux/plugins/tpm/tpm'
